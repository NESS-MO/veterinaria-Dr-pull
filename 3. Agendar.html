<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario y Agendar</title>
    <link rel="icon" href="Imagenes/Logo.png"/>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="3. Agendar.css">
</head>
<body>
    <header>
        <div class="Logotipo">
            <a href="1. Index.html">
                <img src="imagenes/logo2.png" alt="logo DR.PUL">
            </a>
            <h3 class="eslogan">COMPROMETIDOS CON LA SALUD ANIMAL</h3>
        </div>
    
        <button class="abrir" id="abrir-menu">☰</button>
    
        <nav class="opciones" id="menu">
            <button class="cerrar" id="cerrar-menu">✕</button>
            <a href="1. Index.html">INICIO</a>
            <a href="1. Index.html#conocenos">CONÓCENOS</a>
            <a href="2. Servicios.html">SERVICIOS</a>
            <a href="3. Agendar.html">AGENDAR CITA</a>
            <a href="4. Login.html"><img class="perfil" src="Imagenes/perfil.png" alt="logo DR.PUL"></a>
        </nav>
    </header>

    
    <div class="container" id="calen">
        <div class="calendario-section">
            <h2>Calendario de disponibilidad</h2>
            <div id="calendario"></div>
        </div>
        <a href="#formulario" class="agendar">Agendar</a>
    </div>

    <section class="formulario" id="formulario">
        <div class="container">
            <h2>Agendar Cita</h2>
            <h4></h4>
            <p>Complete el formulario para agendar una cita con nuestros veterinarios.</p>
            <form action="#" method="POST" id="appointment-form">
                <div class="form-group">
                    <label for="nombre">Nombre Completo</label>
                    <input type="text" id="nombre" name="nombre" required placeholder="Ingresa tu nombre completo">
                </div>
                <div class="form-group">
                    <label for="correo">Correo Electrónico</label>
                    <input type="email" id="correo" name="correo" required placeholder="Ingresa tu correo electrónico">
                </div>
                <div class="form-group">
                    <label for="telefono">Número de Teléfono</label>
                    <input type="tel" id="telefono" name="telefono" required placeholder="Ingresa tu número de teléfono">
                </div>
                <div class="form-group">
                    <label for="mascota">Nombre de la Mascota</label>
                    <input type="text" id="mascota" name="mascota" required placeholder="Ingresa el nombre de tu mascota">
                </div>
                <div class="form-group">
                    <label for="clase-mascota">Clase de Mascota</label>
                    <select id="clase-mascota" name="clase-mascota" required>
                        <option value="">Selecciona la clase de tu mascota</option>
                        <option value="Perro">Perro</option>
                        <option value="Gato">Gato</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="fecha">Selecciona en el calendario de arriba la fecha que este disponible</label>
                    <input type="date" id="fecha" name="fecha" required readonly>
                </div>
                <div class="form-group">
                    <label for="hora">Hora de la Cita</label>
                    <input type="time" id="hora" name="hora" required>
                </div>
                <div class="form-group">
                    <label for="services">Motivo de la Cita:</label>
                    <p></p>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="services" value="consulta"> Consulta</label>
                        <label><input type="checkbox" name="services" value="esterilizacion"> Esterilización</label>
                        <label><input type="checkbox" name="services" value="guarderia"> Guardería</label>
                        <label><input type="checkbox" name="services" value="vacunacion"> Vacunación</label>
                        <label><input type="checkbox" name="services" value="profilaxis"> Profilaxis</label>
                        <label><input type="checkbox" name="services" value="cirugias"> Cirugías</label>
                        <label><input type="checkbox" name="services" value="hospitalizacion"> Hospitalización</label>
                        <label><input type="checkbox" name="services" value="asistencia-tecnica"> Asistencia Técnica</label>
                    </div>
                </div>
                
                <button type="submit" class="agendar">Enviar</button>
                <a class="dispo" href="#inicio"><h3>⬆️ Disponibilidad ⬆️</h3></a>
            </form>
        </div>
    </section>
    
    <a href="javascript:salirfo()"><div id="fondo-oscuro" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);"></div></a>

    <!--Boton flotante Tip de la semana-->
    <a href="javascript:tipb()">
        <div class="tip">
            <img src="Imagenes/tip2.jpg" alt="WhatsApp">
            <span class="tooltip-text">¡TIP DE LA SEMANA!</span>
        </div>
    </a>

    <!--Ventana Tip de la semana-->
    <div class="ventana-tip" id="tipv">
        <a href="javascript:salir()">
            <img src="Imagenes/salida.png" class="salir">
        </a>
        <h1><strong>¡TIP DE LA SEMANA!</strong></h1>
        <img src="Imagenes/gato.gif" class="gif">
        <h2>Cuida la nutrición de tu gatito</h2>
        <p>Si nunca has tenido un gato, es fácil que te dejes llevar por los mitos de la nutrición felina que existen, y, debido al desconocimiento, esto pueda provocar que alimentes a tu nueva mascota con alimentos prohibidos para los felinos, como, la leche de vaca, los huevos crudos o la carne cruda, alimentos que pueden afectar severamente el bienestar de un felino.</p>
        <img src="" alt=""/>
        <p></p>
    </div>

    <!--Boton flotante Whatsapp-->
    <a href="https://www.whatsapp.com/?lang=es_LA">
        <div class="whatsapp-logo">
            <img src="Imagenes/WhatsApp.jpg" alt="WhatsApp">
            <span class="tooltip-text">¡Chatea con nosotros!</span>
        </div>
    </a>

    <!--Boton flotante ayuda-->
    <a href="javascript:ayudab()">
        <div class="ayuda">
            <img src="Imagenes/ayuda.jpg" alt="Ayuda">
            <span class="tooltip-text-ayuda">¿Necesitas ayuda?</span>
        </div>
    </a>

    <!--Ventana Ayuda-->
    <div class="ventana-ayuda" id="ayudav">
        <h2>¿Cómo podemos ayudarte?</h2>
        <a href="javascript:salir()">
            <img src="Imagenes/salida.png" class="salir">
        </a>
        <a href="https://accounts.google.com/v3/signin/identifier?continue=https%3A%2F%2Fmail.google.com%2Fmail%2Fu%2F0%2F&emr=1&followup=https%3A%2F%2Fmail.google.com%2Fmail%2Fu%2F0%2F&ifkv=AXH0vVuznh3tW70rj_lnPjuR9wZVXFVPr73Bl8MRTIdgMXU1Q56F1nk_kjEXg1K6Hl146BrlLPaRSw&osid=1&passive=1209600&service=mail&flowName=GlifWebSignIn&flowEntry=ServiceLogin&dsh=S-1828459910%3A1742386782972927">
            Enviar correo electrónico:
            cotamosanti03@gmail.com
        </a>
        <a href="tel:+57 310 6890146"><p>Llamar al servicio de atención</p></a>
    </div>
    <footer>
        <div class="footer-container">
            <!-- Información de contacto -->
            <div class="footer-section">
                <h3>DR.PUL - Clínica Veterinaria</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="material-icons">location_on</i>
                        <p>Cl. 16 #915, Sogamoso, Boyacá</p>
                    </div>
                    <div class="contact-item">
                        <i class="material-icons">phone</i>
                        <p>+57 310 6890146</p>
                    </div>
                    <div class="contact-item">
                        <i class="material-icons">email</i>
                        <p>cotamosanti03@gmail.com</p>
                    </div>
                </div>
            </div>
            
            <!-- Horario de atención -->
            <div class="footer-section">
                <h3>Horario de atención</h3>
                <div class="schedule">
                    <p>Lunes a Viernes: 8:00 AM - 6:00 PM</p>
                    <p>Sábados: 9:00 AM - 2:00 PM</p>
                    <p>Domingos: Cerrado</p>
                </div>
            </div>
            
            <!-- Enlaces rápidos -->
            <div class="footer-section">
                <h3>Enlaces rápidos</h3>
                <div class="quick-links">
                    <a href="1. Index.html">Inicio</a>
                    <a href="#conocenos">Conócenos</a>
                    <a href="2. Servicios.html">Servicios</a>
                    <a href="3. Agendar.html">Agendar cita</a>
                    <a href="4. Login.html">Iniciar sesión</a>
                </div>
            </div>
        </div>
        
        <!-- Derechos de autor -->
        <div class="copyright">
            <p>&copy; 2023 DR.PUL Veterinaria. Todos los derechos reservados.</p>
        </div>
    </footer>
   
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales/es.min.js'></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendario');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'es',
                events: function (fetchInfo, successCallback, failureCallback) {
                    var citas = JSON.parse(localStorage.getItem('citas')) || [];
                    var events = citas.map(function (cita, index) {
                        return {
                            title: `Cita: ${cita.mascota}`,
                            start: `${cita.fecha}T${cita.hora}`,
                            description: `Servicios: ${cita.servicios.join(', ')}`,
                            extendedProps: {
                                citaIndex: index  
                            }
                        };
                    });
                    successCallback(events);
                },
                dateClick: function (info) {
                    var fechaSeleccionada = info.dateStr;
                    document.getElementById('fecha').value = fechaSeleccionada;

                    window.scrollTo({
                        top: document.getElementById('formulario').offsetTop,
                        behavior: 'smooth'
                    });
                },
                eventClick: function (info) {
                    if (confirm(`¿Deseas cancelar la cita para ${info.event.title}?`)) {
                        var citas = JSON.parse(localStorage.getItem('citas')) || [];
                        var citaIndex = info.event.extendedProps.citaIndex;
                        citas.splice(citaIndex, 1);
                        localStorage.setItem('citas', JSON.stringify(citas));
                        info.event.remove();
                    }
                },
                eventTimeFormat: { 
                    hour: '2-digit',
                    minute: '2-digit',
                    meridiem: 'short'
                }
            });

            calendar.render();

            document.getElementById('appointment-form').addEventListener('submit', function (e) {
                e.preventDefault();

                var nombre = document.getElementById('nombre').value;
                var correo = document.getElementById('correo').value;
                var telefono = document.getElementById('telefono').value;
                var mascota = document.getElementById('mascota').value;
                var fecha = document.getElementById('fecha').value;
                var hora = document.getElementById('hora').value;
                var services = [];
                const serviceCheckboxes = document.querySelectorAll('input[name="services"]:checked');

                serviceCheckboxes.forEach(function (checkbox) {
                    services.push(checkbox.value);
                });

                if (!fecha || !hora || services.length === 0) {
                    alert('Por favor, selecciona la fecha, la hora y al menos un servicio.');
                    return;
                }

                var citas = JSON.parse(localStorage.getItem('citas')) || [];
                var existeCita = citas.some(function (cita) {
                    return cita.fecha === fecha && cita.hora === hora;
                });

                if (existeCita) {
                    alert('¡Esta hora ya está ocupada! Por favor, selecciona otra hora.');
                    return;
                }

                var nuevaCita = {
                    nombre: nombre,
                    correo: correo,
                    telefono: telefono,
                    mascota: mascota,
                    fecha: fecha,
                    hora: hora,
                    servicios: services
                };

                citas.push(nuevaCita);
                localStorage.setItem('citas', JSON.stringify(citas));

                calendar.addEvent({
                    title: `Cita: ${mascota}`,
                    start: `${fecha}T${hora}`,
                    description: `Servicios: ${services.join(', ')}`
                });

                document.getElementById('appointment-form').reset();
            });
        });
    </script>

    <script src="MenuHamburguesa.js"></script>

    <script>
        window.siennaOptions = {
            buttonColor: '#3a6ead',
            buttonIconColor: '#ffffff',
            highlightColor: '#3a6ead',
            menuBackgroundColor: '#ffffff',
            menuTextColor: '#333333'
        };
    </script>

    <script src="BotonesFlotantes.js"></script>
    <script src="sienna.js"></script>
    <script src="custom.js"></script>
</body>
</html>
